---
ms.date: 06/12/2017
author: rpsqrd
ms.topic: conceptual
keywords: jea, prostředí powershell, zabezpečení
title: Aspekty zabezpečení JEA
ms.openlocfilehash: 1b83a73c047b056a4cc094d7e4b0bbf31f75f53a
ms.sourcegitcommit: cf195b090b3223fa4917206dfec7f0b603873cdf
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 04/09/2018
---
# <a name="jea-security-considerations"></a><span data-ttu-id="73e09-103">Aspekty zabezpečení JEA</span><span class="sxs-lookup"><span data-stu-id="73e09-103">JEA Security Considerations</span></span>

> <span data-ttu-id="73e09-104">Platí pro: prostředí Windows PowerShell 5.0</span><span class="sxs-lookup"><span data-stu-id="73e09-104">Applies to: Windows PowerShell 5.0</span></span>

<span data-ttu-id="73e09-105">JEA vám pomůže zlepšit lepšímu zabezpečení tím, že snižuje počet trvalých správců na vašich počítačích.</span><span class="sxs-lookup"><span data-stu-id="73e09-105">JEA helps you improve your security posture by reducing the number of permanent administrators on your machines.</span></span>
<span data-ttu-id="73e09-106">Dělá to tak tak, že vytvoříte nový vstupní bod pro uživatele pro správu systému (konfigurace relace prostředí PowerShell), který je ve výchozím nastavení, aby se zabránilo zneužití úzce uzamčena.</span><span class="sxs-lookup"><span data-stu-id="73e09-106">It does so by creating a new entry point for users to manage the system (a PowerShell session configuration) which is tightly locked down by default to prevent misuse.</span></span>
<span data-ttu-id="73e09-107">Uživatele, kteří potřebují některé, ale ne neomezený přístup ke koncovému bodu JEA můžete udělit přístup k počítači k provádění úloh správy.</span><span class="sxs-lookup"><span data-stu-id="73e09-107">Users who need some, but not unlimited, access to the machine to perform administrative tasks can be granted access to the JEA endpoint.</span></span>
<span data-ttu-id="73e09-108">Protože JEA umožňuje, aby se spouštěly správce příkazy přímo bez přístupu správce, můžete odebrat uživatele, pak z vysoce privilegované skupiny zabezpečení (ujistěte se, je standardní uživatelé).</span><span class="sxs-lookup"><span data-stu-id="73e09-108">Because JEA allows them to run admin commands without directly having admin access, you can then remove those users from highly privileged security groups (make them standard users).</span></span>

<span data-ttu-id="73e09-109">Toto téma popisuje model zabezpečení JEA a osvědčené postupy podrobněji.</span><span class="sxs-lookup"><span data-stu-id="73e09-109">This topic describes the JEA security model and best practices in more detail.</span></span>

## <a name="run-as-account"></a><span data-ttu-id="73e09-110">Účet Spustit jako</span><span class="sxs-lookup"><span data-stu-id="73e09-110">Run As account</span></span>

<span data-ttu-id="73e09-111">Každý koncový bod JEA má účet určený "Spustit jako", což je účet, pod kterým se provádějí akce připojování uživatelů.</span><span class="sxs-lookup"><span data-stu-id="73e09-111">Each JEA endpoint has a designated "run as" account, which is the account under which the connecting user's actions are performed.</span></span>
<span data-ttu-id="73e09-112">Tento účet je konfigurovatelná v [relace konfigurační soubor](session-configurations.md), a zvolíte účet nemá významný vliv na zabezpečení váš koncový bod.</span><span class="sxs-lookup"><span data-stu-id="73e09-112">This account is configurable in the [session configuration file](session-configurations.md), and the account you choose has a significant bearing on the security of your endpoint.</span></span>

<span data-ttu-id="73e09-113">**Virtuální účty** jsou doporučeným způsobem konfigurace spustit jako účet.</span><span class="sxs-lookup"><span data-stu-id="73e09-113">**Virtual accounts** are the recommended way of configuring the run as account.</span></span>
<span data-ttu-id="73e09-114">Virtuální účty jsou jednorázové, dočasný místní účty, které jsou vytvořené pro je připojující se uživatel k použití během trvání relace jejich JEA.</span><span class="sxs-lookup"><span data-stu-id="73e09-114">Virtual accounts are one-time, temporary local accounts that are created for the connecting user to use during the duration of their JEA session.</span></span>
<span data-ttu-id="73e09-115">Při jejich relace je ukončena, virtuální účet bude zrušen a již nelze použít.</span><span class="sxs-lookup"><span data-stu-id="73e09-115">As soon as their session is terminated, the virtual account will be destroyed and cannot be used anymore.</span></span>
<span data-ttu-id="73e09-116">Je připojující se uživatel nebude vědět, přihlašovací údaje pro virtuální účet a nemůže používat virtuální účet pro přístup k systému prostřednictvím jiným způsobem, jako je vzdálené plochy nebo koncový bod neomezeným prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="73e09-116">The connecting user does not know the credentials for the virtual account and cannot use the virtual account to access the system via other means, such as Remote Desktop or an unconstrained PowerShell endpoint.</span></span>

<span data-ttu-id="73e09-117">Ve výchozím nastavení virtuální účty patřit do místní skupiny administrators v počítači.</span><span class="sxs-lookup"><span data-stu-id="73e09-117">By default, virtual accounts belong to the local administrators group on the machine.</span></span>
<span data-ttu-id="73e09-118">Díky tomu je úplná práva ke správě nic v systému, ale žádná práva ke správě prostředků v síti.</span><span class="sxs-lookup"><span data-stu-id="73e09-118">This gives them full rights to manage anything on the system, but no rights to manage resources on the network.</span></span>
<span data-ttu-id="73e09-119">Při ověřování s jinými počítači, bude uživatelský kontext, účet místního počítače, není virtuální účet.</span><span class="sxs-lookup"><span data-stu-id="73e09-119">When authenticating with other machines, the user context will be that of the local computer account, not the virtual account.</span></span>

<span data-ttu-id="73e09-120">Řadiče domény představují zvláštní případ, protože neexistuje žádná koncepce místní skupiny administrators.</span><span class="sxs-lookup"><span data-stu-id="73e09-120">Domain controllers are a special case since there is no concept of a local administrators group.</span></span>
<span data-ttu-id="73e09-121">Místo toho virtuální účty patří do skupiny Domain Admins místo toho a můžete spravovat directory services na řadiči domény.</span><span class="sxs-lookup"><span data-stu-id="73e09-121">Instead, virtual accounts belong to Domain Admins instead and can manage the directory services on the domain controller.</span></span>
<span data-ttu-id="73e09-122">Identita domény je stále omezen na použít na řadiči domény, kde byla vytvořena instance relace JEA, a místo toho pochází z objektu počítače řadiče domény se zobrazí všechny přístup k síti.</span><span class="sxs-lookup"><span data-stu-id="73e09-122">The domain identity is still restricted to use on the domain controller where the JEA session was instantiated, and any network access will appear to come from the domain controller computer object instead.</span></span>

<span data-ttu-id="73e09-123">V obou případech můžete také explicitně definovat, které virtuální účet musí patřit do skupiny zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="73e09-123">In both cases, you can also explicitly define which security groups the virtual account should belong to.</span></span>
<span data-ttu-id="73e09-124">To je vhodné, pokud úlohy, kterou provádíte jde provést bez oprávnění správce pro místní nebo domény.</span><span class="sxs-lookup"><span data-stu-id="73e09-124">This is a good practice when the task you are performing can be done without local/domain admin privileges.</span></span>
<span data-ttu-id="73e09-125">Pokud už máte skupinu zabezpečení pro vaši správci definována, můžete jednoduše udělit členství virtuální účet do této skupiny jí přidělit oprávnění, která potřebuje.</span><span class="sxs-lookup"><span data-stu-id="73e09-125">If you already have a security group defined for your admins, you can simply grant the virtual account membership to that group to give it the permissions it needs.</span></span>
<span data-ttu-id="73e09-126">Členství ve skupině virtuální účet je omezený na místní skupiny zabezpečení na pracovní stanici a členské servery, ale na řadiči domény lze pouze členy skupiny zabezpečení domény.</span><span class="sxs-lookup"><span data-stu-id="73e09-126">Virtual account group membership is limited to local security groups on workstation and member servers, but on a domain controller they can only be members of domain security groups.</span></span>
<span data-ttu-id="73e09-127">Jakmile zadáte jednu nebo více skupin zabezpečení pro virtuální účet patří, se už patří do výchozí skupiny (místní správce nebo správce domény).</span><span class="sxs-lookup"><span data-stu-id="73e09-127">Once you specify one or more security groups for the virtual account to belong to, it will no longer belong to the default groups (local admin or domain admin).</span></span>

<span data-ttu-id="73e09-128">Následující tabulka shrnuje možnosti možné konfigurace a výsledný oprávnění pro virtuální účty</span><span class="sxs-lookup"><span data-stu-id="73e09-128">The table below summarizes the possible configuration options and resulting permissions for virtual accounts</span></span>

<span data-ttu-id="73e09-129">Typ počítače</span><span class="sxs-lookup"><span data-stu-id="73e09-129">Computer type</span></span>                | <span data-ttu-id="73e09-130">Konfigurace skupiny virtuální účet</span><span class="sxs-lookup"><span data-stu-id="73e09-130">Virtual account group configuration</span></span> | <span data-ttu-id="73e09-131">Kontext místní uživatele</span><span class="sxs-lookup"><span data-stu-id="73e09-131">Local user context</span></span>                                      | <span data-ttu-id="73e09-132">Kontext uživatele sítě</span><span class="sxs-lookup"><span data-stu-id="73e09-132">Network user context</span></span>
-----------------------------|-------------------------------------|---------------------------------------------------------|--------------------------------------------------
<span data-ttu-id="73e09-133">Řadič domény</span><span class="sxs-lookup"><span data-stu-id="73e09-133">Domain controller</span></span>            | <span data-ttu-id="73e09-134">Výchozí</span><span class="sxs-lookup"><span data-stu-id="73e09-134">Default</span></span>                             | <span data-ttu-id="73e09-135">Uživatel domény, členem '*domény*\Domain Admins</span><span class="sxs-lookup"><span data-stu-id="73e09-135">Domain user, member of '*DOMAIN*\Domain Admins'</span></span>         | <span data-ttu-id="73e09-136">Účet počítače</span><span class="sxs-lookup"><span data-stu-id="73e09-136">Computer account</span></span>
<span data-ttu-id="73e09-137">Řadič domény</span><span class="sxs-lookup"><span data-stu-id="73e09-137">Domain controller</span></span>            | <span data-ttu-id="73e09-138">Skupiny v doméně A a B</span><span class="sxs-lookup"><span data-stu-id="73e09-138">Domain groups A and B</span></span>               | <span data-ttu-id="73e09-139">Uživatel domény, členem '*domény*\A ','*domény*\B.</span><span class="sxs-lookup"><span data-stu-id="73e09-139">Domain user, member of '*DOMAIN*\A', '*DOMAIN*\B'</span></span>       | <span data-ttu-id="73e09-140">Účet počítače</span><span class="sxs-lookup"><span data-stu-id="73e09-140">Computer account</span></span>
<span data-ttu-id="73e09-141">Členský server nebo pracovní stanice</span><span class="sxs-lookup"><span data-stu-id="73e09-141">Member server or workstation</span></span> | <span data-ttu-id="73e09-142">Výchozí</span><span class="sxs-lookup"><span data-stu-id="73e09-142">Default</span></span>                             | <span data-ttu-id="73e09-143">Místního uživatele, členem '*BUILTIN*\Administrators.</span><span class="sxs-lookup"><span data-stu-id="73e09-143">Local user, member of '*BUILTIN*\Administrators'</span></span>        | <span data-ttu-id="73e09-144">Účet počítače</span><span class="sxs-lookup"><span data-stu-id="73e09-144">Computer account</span></span>
<span data-ttu-id="73e09-145">Členský server nebo pracovní stanice</span><span class="sxs-lookup"><span data-stu-id="73e09-145">Member server or workstation</span></span> | <span data-ttu-id="73e09-146">Místní skupiny C a D</span><span class="sxs-lookup"><span data-stu-id="73e09-146">Local groups C and D</span></span>                | <span data-ttu-id="73e09-147">Místního uživatele, členem '*počítače*\C' a '*počítače*\D.</span><span class="sxs-lookup"><span data-stu-id="73e09-147">Local user, member of '*COMPUTER*\C' and '*COMPUTER*\D'</span></span> | <span data-ttu-id="73e09-148">Účet počítače</span><span class="sxs-lookup"><span data-stu-id="73e09-148">Computer account</span></span>

<span data-ttu-id="73e09-149">Když se podíváte na události auditu zabezpečení a v protokolu událostí aplikace, zobrazí se, že každý JEA uživatelské relace má jedinečný virtuální účet.</span><span class="sxs-lookup"><span data-stu-id="73e09-149">When you look at security audit events and application event logs, you will see that each JEA user session has a unique virtual account.</span></span>
<span data-ttu-id="73e09-150">To vám pomůže sledovat uživatele akce v koncový bod JEA zpět do původního uživatele, který spustil příkaz.</span><span class="sxs-lookup"><span data-stu-id="73e09-150">This helps you track user actions in a JEA endpoint back to the original user who ran the command.</span></span>
<span data-ttu-id="73e09-151">Virtuální účet názvy použijte formát "WinRM virtuální uživatelé\\WinRM\_VA\_*ACCOUNTNUMBER*\_*domény* \_ *sAMAccountName*"Pokud se uživatel"Alice"v doméně"Contoso"restartuje službu v koncový bod JEA, uživatelské jméno přidružené žádné události správce řízení služby by být například" WinRM virtuální uživatelé\\WinRM\_ VA\_1\_contoso\_alice ".</span><span class="sxs-lookup"><span data-stu-id="73e09-151">Virtual account names follow the format "WinRM Virtual Users\\WinRM\_VA\_*ACCOUNTNUMBER*\_*DOMAIN*\_*sAMAccountName*" For example, if user "Alice" in domain "Contoso" restarts a service in a JEA endpoint, the username associated with any service control manager events would be "WinRM Virtual Users\\WinRM\_VA\_1\_contoso\_alice".</span></span>


<span data-ttu-id="73e09-152">**Skupina účty spravované služby (Gmsa)** je užitečný v případě členský server musí mít přístup k síťovým prostředkům v relaci JEA.</span><span class="sxs-lookup"><span data-stu-id="73e09-152">**Group managed service accounts (gMSAs)** are useful when a member server needs to have access to network resources in the JEA session.</span></span>
<span data-ttu-id="73e09-153">Případ použití příkladu to je JEA koncový bod, který se používá k řízení přístupu k rozhraní REST API hostované na jiný počítač.</span><span class="sxs-lookup"><span data-stu-id="73e09-153">An example use case for this is a JEA endpoint that is used to control access to a REST API hosted on a different machine.</span></span>
<span data-ttu-id="73e09-154">Je snadné k zápisu, aby požadované volání rozhraní API služby REST, ale aby bylo možné ověření pomocí rozhraní API funkce potřebujete síťové identity.</span><span class="sxs-lookup"><span data-stu-id="73e09-154">It is easy to write functions to make the desired invocations on the REST API, but in order to authenticate with the API you need a network identity.</span></span>
<span data-ttu-id="73e09-155">Pomocí účtu služby spravované skupiny umožňuje "druhé směrování" přitom stále má ovládací prvek, přes které počítače můžete použít účet.</span><span class="sxs-lookup"><span data-stu-id="73e09-155">Using a group managed service account makes the "second hop" possible while still having control over which computers can use the account.</span></span>
<span data-ttu-id="73e09-156">Skutečná oprávnění gMSA jsou definovány pomocí skupin zabezpečení (místní nebo doménový), ke které patří k účtu gMSA.</span><span class="sxs-lookup"><span data-stu-id="73e09-156">The effective permissions of the gMSA are defined by the security groups (local or domain) to which the gMSA account belongs.</span></span>

<span data-ttu-id="73e09-157">Pokud koncový bod JEA je nakonfigurovaná pro použití účtu gMSA, se zobrazí akce všichni uživatelé JEA pocházet ze stejné skupiny účet spravované služby.</span><span class="sxs-lookup"><span data-stu-id="73e09-157">When a JEA endpoint is configured to use a gMSA account, the actions of all JEA users will appear to come from the same group managed service account.</span></span>
<span data-ttu-id="73e09-158">K identifikaci sadu příkazů, spusťte v relaci přepisu prostředí PowerShell je jediným způsobem, jak mohou sledovat akce zpět na konkrétního uživatele.</span><span class="sxs-lookup"><span data-stu-id="73e09-158">The only way you can trace actions back to a specific user is to identify the set of commands run in a PowerShell session transcript.</span></span>

<span data-ttu-id="73e09-159">**Přihlašovací údaje průchodu přispívají** se používají, když jste nezadávejte spustit jako účet a chcete prostředí PowerShell použít přihlašovací údaje uživatele připojování ke spuštění příkazů na vzdáleném serveru.</span><span class="sxs-lookup"><span data-stu-id="73e09-159">**Pass-thru credentials** are used when you do not specify a run as account and want PowerShell to use the connecting user's credential to run commands on the remote server.</span></span>
<span data-ttu-id="73e09-160">Tato konfigurace je *není* nedoporučuje pro JEA, protože by vyžadují, abyste udělit připojování uživatelů přímý přístup ke skupinám pro správu privilegovaných.</span><span class="sxs-lookup"><span data-stu-id="73e09-160">This configuration is *not* recommended for JEA as it would require you to grant the connecting user direct access to privileged management groups.</span></span>
<span data-ttu-id="73e09-161">Pokud je připojující se uživatel už má oprávnění správce, se mohou vyhnout JEA zcela a spravovat systému prostřednictvím znamená další, bez omezení.</span><span class="sxs-lookup"><span data-stu-id="73e09-161">If the connecting user already has admin privileges, they can avoid JEA altogether and manage the system via other, unconstrained means.</span></span>
<span data-ttu-id="73e09-162">O tom, najdete v části níže [JEA neposkytuje ochranu proti admins](#jea-does-not-protect-against-admins) Další informace.</span><span class="sxs-lookup"><span data-stu-id="73e09-162">See the section below on how [JEA does not protect against admins](#jea-does-not-protect-against-admins) for more information.</span></span>

<span data-ttu-id="73e09-163">**Standardní spustit jako účty** umožňují zadat libovolný uživatelský účet, pod kterým poběží celé relace prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="73e09-163">**Standard run as accounts** allow you to specify any user account under which the entire PowerShell session will run.</span></span>
<span data-ttu-id="73e09-164">To je zásadní rozdíl, protože konfigurace relace nastavena na hodnotu použít pevné spustit jako účtu (s `-RunAsCredential` parametr) JEA neví.</span><span class="sxs-lookup"><span data-stu-id="73e09-164">This is an important distinction, because a session configuration set to use a fixed run as account (with the `-RunAsCredential` parameter) is not JEA-aware.</span></span>
<span data-ttu-id="73e09-165">To znamená, že definice rolí již nebude fungovat podle očekávání, a každý uživatel oprávnění pro přístup ke koncovému bodu se přiřadí na stejný atribut role.</span><span class="sxs-lookup"><span data-stu-id="73e09-165">That means that role definitions no longer function as expected, and every user authorized to access the endpoint will be assigned the same role.</span></span>

<span data-ttu-id="73e09-166">Neměli byste používat RunAsCredential na koncový bod JEA z důvodu potíže v trasování akce zpět na konkrétní uživatele a nedostatečná podpora pro mapování uživatelů na role.</span><span class="sxs-lookup"><span data-stu-id="73e09-166">You should not use a RunAsCredential on a JEA endpoint because of the difficulty in tracing actions back to specific users and the lack of support for mapping users to roles.</span></span>

## <a name="winrm-endpoint-acl"></a><span data-ttu-id="73e09-167">Koncový bod služby WinRM seznamu ACL</span><span class="sxs-lookup"><span data-stu-id="73e09-167">WinRM Endpoint ACL</span></span>

<span data-ttu-id="73e09-168">Jako s regulární koncových bodů vzdálenou komunikaci prostředí PowerShell, každý koncový bod JEA má seznam řízení samostatné přístupu (ACL) nastavit v konfiguraci WinRM, která určuje, kdo může ověřit s koncovým bodem JEA.</span><span class="sxs-lookup"><span data-stu-id="73e09-168">As with regular PowerShell remoting endpoints, each JEA endpoint has a separate access control list (ACL) set in the WinRM configuration that controls who can authenticate with the JEA endpoint.</span></span>
<span data-ttu-id="73e09-169">Pokud nesprávně nakonfigurována, důvěryhodní uživatelé nemusí mít přístup ke koncovému bodu JEA nebo nedůvěryhodné uživatelé mohou získat přístup.</span><span class="sxs-lookup"><span data-stu-id="73e09-169">If improperly configured, trusted users may not be able to access the JEA endpoint and/or untrusted users may gain access.</span></span>
<span data-ttu-id="73e09-170">Seznam ACL WinRM však neovlivňuje mapování uživatelům JEA role.</span><span class="sxs-lookup"><span data-stu-id="73e09-170">The WinRM ACL does not, however, affect the mapping of users to JEA roles.</span></span>
<span data-ttu-id="73e09-171">Která je řízena *RoleDefinitions* pole v konfiguračním souboru relace, který byl zaregistrován v systému.</span><span class="sxs-lookup"><span data-stu-id="73e09-171">That is controlled by the *RoleDefinitions* field in the session configuration file that was registered on the system.</span></span>

<span data-ttu-id="73e09-172">Ve výchozím nastavení při registraci koncový bod JEA pomocí konfiguračního souboru relace a jeden nebo více možností role seznamu ACL WinRM nakonfigurují všichni uživatelé, mapování na jeden nebo více rolí přístup ke koncovému bodu.</span><span class="sxs-lookup"><span data-stu-id="73e09-172">By default, when you register a JEA endpoint using a session configuration file and one or more role capabilities, the WinRM ACL will be configured to allow all users mapping to one or more roles access to the endpoint.</span></span>
<span data-ttu-id="73e09-173">Například relaci JEA nakonfigurovat pomocí následujících příkazů udělí úplný přístup k *CONTOSO\JEA\_Lev1* a *CONTOSO\JEA\_Lev2*.</span><span class="sxs-lookup"><span data-stu-id="73e09-173">For example, a JEA session configured using the following commands will grant full access to *CONTOSO\JEA\_Lev1* and *CONTOSO\JEA\_Lev2*.</span></span>

```powershell
$roles = @{ 'CONTOSO\JEA_Lev1' = 'Lev1Role'; 'CONTOSO\JEA_Lev2' = 'Lev2Role' }
New-PSSessionConfigurationFile -Path '.\jea.pssc' -SessionType RestrictedRemoteServer -RoleDefinitions $roles -RunAsVirtualAccount
Register-PSSessionConfiguration -Path '.\jea.pssc' -Name 'MyJEAEndpoint'
```

<span data-ttu-id="73e09-174">Můžete auditovat oprávnění uživatele s [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration) rutiny.</span><span class="sxs-lookup"><span data-stu-id="73e09-174">You can audit user permissions with the [Get-PSSessionConfiguration](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/get-pssessionconfiguration) cmdlet.</span></span>

```powershell
PS C:\> Get-PSSessionConfiguration -Name 'MyJEAEndpoint' | Select-Object Permission

Permission
----------
CONTOSO\JEA_Lev1 AccessAllowed
CONTOSO\JEA_Lev2 AccessAllowed
```

<span data-ttu-id="73e09-175">Pokud chcete změnit, kteří uživatelé mají přístup, spusťte některý `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` pro interaktivní výzvu nebo `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` aktualizovat oprávnění.</span><span class="sxs-lookup"><span data-stu-id="73e09-175">To change which users have access, run either `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -ShowSecurityDescriptorUI` for an interactive prompt or `Set-PSSessionConfiguration -Name 'MyJEAEndpoint' -SecurityDescriptorSddl <SDDL string>` to update the permissions.</span></span>
<span data-ttu-id="73e09-176">Uživatelé potřebovat aspoň *Invoke* práva pro přístup k JEA koncový bod.</span><span class="sxs-lookup"><span data-stu-id="73e09-176">Users need at least *Invoke* rights to access the JEA endpoint.</span></span>

<span data-ttu-id="73e09-177">Pokud dalším uživatelům udělen přístup ke koncovému bodu JEA, ale nepatří do kterékoli z těchto rolí definována v konfiguračním souboru relace, bude možné spustit relaci JEA však mít přístup pouze k rutiny výchozí.</span><span class="sxs-lookup"><span data-stu-id="73e09-177">If additional users are granted access to the JEA endpoint but do not fall into any of the roles defined in the session configuration file, they will be able to start a JEA session but only have access to the default cmdlets.</span></span>
<span data-ttu-id="73e09-178">Můžete auditovat oprávnění uživatele v koncový bod JEA spuštěním `Get-PSSessionCapability`.</span><span class="sxs-lookup"><span data-stu-id="73e09-178">You can audit user permissions in a JEA endpoint by running `Get-PSSessionCapability`.</span></span>
<span data-ttu-id="73e09-179">Podívejte se [auditování a vytváření sestav na JEA](audit-and-report.md) článku Další informace o auditování, které příkazy uživatel má přístup k v koncový bod JEA.</span><span class="sxs-lookup"><span data-stu-id="73e09-179">Check out the [Auditing and Reporting on JEA](audit-and-report.md) article for more information about auditing which commands a user has access to in a JEA endpoint.</span></span>

## <a name="least-privilege-roles"></a><span data-ttu-id="73e09-180">Nejnižší oprávnění role</span><span class="sxs-lookup"><span data-stu-id="73e09-180">Least privilege roles</span></span>

<span data-ttu-id="73e09-181">Při navrhování JEA role, je důležité si pamatovat, že virtuální nebo skupiny spravované služby účet běžící na pozadí často má neomezený přístup ke správě místního počítače.</span><span class="sxs-lookup"><span data-stu-id="73e09-181">When designing JEA roles, it is important to remember that the virtual or group managed service account running behind the scenes often has unrestricted access to manage the local machine.</span></span>
<span data-ttu-id="73e09-182">Funkce role JEA pomoci omezit, co tento účet slouží pro omezením příkazy a aplikace, které lze spouštět s využitím této privilegované kontextu.</span><span class="sxs-lookup"><span data-stu-id="73e09-182">JEA role capabilities help restrict what that account can be used for by limiting the commands and applications that can be run using that privileged context.</span></span>
<span data-ttu-id="73e09-183">Nesprávně navrženou rolí můžete povolit nebezpečná příkazy, pomocí které může umožnit uživateli rozdělit mimo hranice JEA nebo získat přístup k citlivé informace.</span><span class="sxs-lookup"><span data-stu-id="73e09-183">Improperly designed roles can allow dangerous commands to run that may allow a user to break out of the JEA boundaries or obtain access to sensitive information.</span></span>

<span data-ttu-id="73e09-184">Zvažte například následující položku schopnosti role:</span><span class="sxs-lookup"><span data-stu-id="73e09-184">For example, consider the following role capability entry:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\*-Process'
}
```

<span data-ttu-id="73e09-185">Tato možnost role umožňuje uživatelům umožní spouštět všechny rutiny prostředí PowerShell s podstatné jméno "Proces" z modulu Microsoft.PowerShell.Management.</span><span class="sxs-lookup"><span data-stu-id="73e09-185">This role capability allows users to run any PowerShell cmdlet with the noun "Process" from the Microsoft.PowerShell.Management module.</span></span>
<span data-ttu-id="73e09-186">Uživatelé mohou potřebovat přístup k rutiny jako `Get-Process` zjistit, co aplikace běží v systému a `Stop-Process` ukončit všechny zablokování aplikace.</span><span class="sxs-lookup"><span data-stu-id="73e09-186">Users may need to access cmdlets like `Get-Process` to understand what applications are running on the system and `Stop-Process` to kill any hung applications.</span></span>
<span data-ttu-id="73e09-187">Však tato položka také umožňuje `Start-Process`, který umožňuje spuštění libovolné aplikace s oprávněními správce s úplnými oprávněními.</span><span class="sxs-lookup"><span data-stu-id="73e09-187">However, this entry also allows `Start-Process`, which can be used to start up an arbitrary program with full administrator permissions.</span></span>
<span data-ttu-id="73e09-188">Program nemusí být nainstalovány místně na serveru, tak nežádoucí osoba může jednoduše spustit program na sdílené složce, která poskytuje připojování uživatelská oprávnění místního správce, spustí malwaru a další. "</span><span class="sxs-lookup"><span data-stu-id="73e09-188">The program doesn't need to be installed locally on the system, so an adversary could simply start a program on a file share that gives the connecting user local admin privileges, runs malware, and more.'</span></span>

<span data-ttu-id="73e09-189">Bude vypadat bezpečnější verze tuto funkci stejné role:</span><span class="sxs-lookup"><span data-stu-id="73e09-189">A more secure version of this same role capability would look like:</span></span>

```powershell
@{
    VisibleCmdlets = 'Microsoft.PowerShell.Management\Get-Process', 'Microsoft.PowerShell.Management\Stop-Process'
}
```

<span data-ttu-id="73e09-190">Vyhněte se použití zástupných znaků v možnosti role a nezapomeňte si [audit efektivní uživatelské oprávnění](audit-and-report.md#check-effective-rights-for-a-specific-user) pravidelně zjistit, které příkazy uživatel má přístup k.</span><span class="sxs-lookup"><span data-stu-id="73e09-190">Avoid using wildcards in role capabilities, and be sure to [audit effective user permissions](audit-and-report.md#check-effective-rights-for-a-specific-user) regularly to understand which commands a user has access to.</span></span>

## <a name="jea-does-not-protect-against-admins"></a><span data-ttu-id="73e09-191">JEA neposkytuje ochranu proti admins</span><span class="sxs-lookup"><span data-stu-id="73e09-191">JEA does not protect against admins</span></span>

<span data-ttu-id="73e09-192">Jednou ze základních zásad JEA je, že umožňuje bez oprávnění správce k provedení *některé* úlohy správy.</span><span class="sxs-lookup"><span data-stu-id="73e09-192">One of the core principles of JEA is that it allows non-admins to perform *some* admin tasks.</span></span>
<span data-ttu-id="73e09-193">JEA neposkytuje ochranu proti uživatelů, kteří již mají oprávnění správce.</span><span class="sxs-lookup"><span data-stu-id="73e09-193">JEA does not protect against those who already have administrator privileges.</span></span>
<span data-ttu-id="73e09-194">Uživatelé patřící "domain admins," "místní správci," nebo jiných vysoce privilegovaných skupin ve vašem prostředí budou mít pořád povolený a vyhnout ochrany na JEA se po přihlášení k počítači prostřednictvím jinými prostředky.</span><span class="sxs-lookup"><span data-stu-id="73e09-194">Users who belong "domain admins," "local admins," or other highly privileged groups in your environment will still be able to get around JEA's protections by signing into the machine via another means.</span></span>
<span data-ttu-id="73e09-195">Můžou, například, přihlaste se pomocí protokolu RDP, použít vzdálené konzoly MMC nebo připojení ke koncovým bodům neomezeným prostředí PowerShell.</span><span class="sxs-lookup"><span data-stu-id="73e09-195">They could, for example, sign in with RDP, use remote MMC consoles, or connect to unconstrained PowerShell endpoints.</span></span>
<span data-ttu-id="73e09-196">Místní správci na serveru můžete také upravit JEA konfigurace, aby další uživatelé mohli spravovat systém nebo změna role schopnost rozšířit rozsah co dělat v jejich JEA relaci uživatele.</span><span class="sxs-lookup"><span data-stu-id="73e09-196">Local admins on the system can also modify JEA configurations to allow additional users to manage the system or change a role capability to extend the scope of what a user can do in their JEA session.</span></span>
<span data-ttu-id="73e09-197">Proto je důležité vyhodnotit vaši uživatelé JEA rozšířené oprávnění k zobrazení, pokud existují další způsoby, se může získat oprávnění k přístupu do systému.</span><span class="sxs-lookup"><span data-stu-id="73e09-197">It is therefore important to evaluate your JEA users' extended permissions to see if there are other ways they could gain privileged access to the system.</span></span>

<span data-ttu-id="73e09-198">Běžnou praxí je pomocí JEA pravidelné každodenní údržby a máte "jenom v čase" privilegovaný přístup řešení pro správu povolit uživatelům dočasně stanou místní správci v případě nouze.</span><span class="sxs-lookup"><span data-stu-id="73e09-198">A common practice is to use JEA for regular day-to-day maintenance and have a "just in time" privileged access management solution allow users to temporarily become local admins in emergency situations.</span></span>
<span data-ttu-id="73e09-199">Díky tomu uživatelé nejsou trvalých správců systému, ale můžete získat tato práva, pokud a jenom v případě, po dokončení pracovního postupu, který dokumenty jejich používání těchto oprávnění.</span><span class="sxs-lookup"><span data-stu-id="73e09-199">This helps ensure users are not permanent admins on the system, but can get those rights if, and only when, they complete a workflow that documents their use of those permissions.</span></span>