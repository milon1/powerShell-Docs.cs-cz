---
ms.date: 2017-06-27
keywords: "rutiny prostředí PowerShell"
title: "Autorizační pravidla a funkce zabezpečení Windows PowerShell Web Accessu"
ms.openlocfilehash: 19e4aa1bb55178ec2634af0771afe2db5db3423c
ms.sourcegitcommit: 99227f62dcf827354770eb2c3e95c5cf6a3118b4
ms.translationtype: MT
ms.contentlocale: cs-CZ
ms.lasthandoff: 03/15/2018
---
# <a name="authorization-rules-and-security-features-of-windows-powershell-web-access"></a><span data-ttu-id="7607c-103">Autorizační pravidla a funkce zabezpečení Windows PowerShell Web Accessu</span><span class="sxs-lookup"><span data-stu-id="7607c-103">Authorization Rules and Security Features of Windows PowerShell Web Access</span></span>

<span data-ttu-id="7607c-104">Aktualizované: Červen 24, 2013</span><span class="sxs-lookup"><span data-stu-id="7607c-104">Updated: June 24, 2013</span></span>

<span data-ttu-id="7607c-105">Platí pro: Windows Server 2012 R2, Windows Server 2012</span><span class="sxs-lookup"><span data-stu-id="7607c-105">Applies To: Windows Server 2012 R2, Windows Server 2012</span></span>

<span data-ttu-id="7607c-106">Windows PowerShell Web Access v systému Windows Server 2012 R2 a Windows Server 2012 má model omezující zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="7607c-106">Windows PowerShell Web Access in Windows Server 2012 R2 and Windows Server 2012 has a restrictive security model.</span></span>
<span data-ttu-id="7607c-107">Uživatelé musí mít explicitně udělený přístup předtím, než může přihlásit k bráně Windows PowerShell Web Access a používat webovou konzolu prostředí Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7607c-107">Users must explicitly be granted access before they can sign in to the Windows PowerShell Web Access gateway and use the web-based Windows PowerShell console.</span></span>

## <a name="configuring-authorization-rules-and-site-security"></a><span data-ttu-id="7607c-108">Konfigurace autorizačních pravidel a zabezpečení lokality</span><span class="sxs-lookup"><span data-stu-id="7607c-108">Configuring authorization rules and site security</span></span>

<span data-ttu-id="7607c-109">Po nainstalování Windows PowerShell Web Access a konfiguraci brány, uživatelé mohli otevřít přihlašovací stránku v prohlížeči, ale se nelze přihlásit, dokud správce Windows PowerShell Web Access explicitně neudělí přístup.</span><span class="sxs-lookup"><span data-stu-id="7607c-109">After Windows PowerShell Web Access is installed and the gateway is configured, users can open the sign-in page in a browser, but they cannot sign in until the Windows PowerShell Web Access administrator grants users access explicitly.</span></span>
<span data-ttu-id="7607c-110">Řízení přístupu, Windows PowerShell Web Access"spravuje pomocí sady rutin prostředí Windows PowerShell, které jsou popsané v následující tabulce.</span><span class="sxs-lookup"><span data-stu-id="7607c-110">'Windows PowerShell Web Access' access control is managed by using the set of Windows PowerShell cmdlets described in the following table.</span></span>
<span data-ttu-id="7607c-111">Neexistuje žádné srovnatelné grafické uživatelské rozhraní pro přidávání nebo správu autorizačních pravidel.</span><span class="sxs-lookup"><span data-stu-id="7607c-111">There is no comparable GUI for adding or managing authorization rules.</span></span>
<span data-ttu-id="7607c-112">V tématu [rutiny prostředí Windows PowerShell Web Access](cmdlets/web-access-cmdlets.md).</span><span class="sxs-lookup"><span data-stu-id="7607c-112">See [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md).</span></span>

<span data-ttu-id="7607c-113">Správci můžou definovat 0 -*n* pravidla ověřování pro Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-113">Administrators can define 0-*n* authentication rules for Windows PowerShell Web Access.</span></span>
<span data-ttu-id="7607c-114">Výchozí zabezpečení je víc omezující než povolující, nulový počet ověřovacích pravidel znamená, že uživatelé nemají k ničemu přístup.</span><span class="sxs-lookup"><span data-stu-id="7607c-114">The default security is restrictive rather than permissive; zero authentication rules means no users have access to anything.</span></span>

<span data-ttu-id="7607c-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) a [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) ve Windows serveru 2012 R2 obsahují parametr Credential, který umožňuje přidat a otestovat autorizační pravidla Windows PowerShell Web Access ze vzdálené počítače, nebo z v aktivní relaci Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-115">[Add-PswaAuthorizationRule](cmdlets/add-pswaauthorizationrule.md) and [Test-PswaAuthorizationRule](cmdlets/test-pswaauthorizationrule.md) in Windows Server 2012 R2 include a Credential parameter that allows you to add and test Windows PowerShell Web Access authorization rules from a remote computer, or from within an active Windows PowerShell Web Access session.</span></span>
<span data-ttu-id="7607c-116">Jako s jinými rutinami prostředí Windows PowerShell, které mají parametr Credential, můžete určit objekt PSCredential jako hodnotu parametru.</span><span class="sxs-lookup"><span data-stu-id="7607c-116">As with other Windows PowerShell cmdlets that have a Credential parameter, you can specify a PSCredential object as the value of the parameter.</span></span>
<span data-ttu-id="7607c-117">Chcete-li vytvořit objekt PSCredential obsahující pověření, které chcete předat do vzdáleného počítače, spusťte [Get-Credential](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.security/Get-Credential) rutiny.</span><span class="sxs-lookup"><span data-stu-id="7607c-117">To create a PSCredential object that contains credentials you want to pass to a remote computer, run the [Get-Credential](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.security/Get-Credential) cmdlet.</span></span>

<span data-ttu-id="7607c-118">Pravidla ověřování Windows PowerShell Web Access jsou povolená pravidla.</span><span class="sxs-lookup"><span data-stu-id="7607c-118">Windows PowerShell Web Access authentication rules are whitelist rules.</span></span>
<span data-ttu-id="7607c-119">Každé pravidlo je definicí povolených připojení mezi uživateli, cílové počítače a konkrétní Windows PowerShellÂ [konfigurace relace](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) (také označuje jako koncové body nebo _prostředí runspace_) na zadané cílové počítače.</span><span class="sxs-lookup"><span data-stu-id="7607c-119">Each rule is a definition of an allowed connection between users, target computers, and particular Windows PowerShellÂ [session configurations](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configurations) (also referred to as endpoints or _runspaces_) on specified target computers.</span></span>
<span data-ttu-id="7607c-120">Vysvětlení na **prostředí runspace** najdete v části [začátku pomocí prostředí PowerShell prostředí runspace](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span><span class="sxs-lookup"><span data-stu-id="7607c-120">For an explanation on **runspaces** see [Beginning Use of PowerShell Runspaces](https://blogs.technet.microsoft.com/heyscriptingguy/2015/11/26/beginning-use-of-powershell-runspaces-part-1/)</span></span>

> <span data-ttu-id="7607c-121">**Poznámka k zabezpečení**</span><span class="sxs-lookup"><span data-stu-id="7607c-121">**Security Note**</span></span>
>
> <span data-ttu-id="7607c-122">Aby uživatel získal přístup, stačí, aby platilo jedno pravidlo.</span><span class="sxs-lookup"><span data-stu-id="7607c-122">A user needs only one rule to be true to get access.</span></span>
<span data-ttu-id="7607c-123">Pokud má uživatel přístup k jednomu počítači s úplným jazykovým přístupem nebo přístup jenom k rutinami pro vzdálenou správu prostředí Windows PowerShell, z webové konzoly, uživatel může přihlásit (nebo směrování) do jiných počítačů, které jsou připojené k prvnímu cílovému počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-123">If a user is given access to one computer with either full language access or access only to Windows PowerShell remote management cmdlets, from the web-based console, the user can log on (or hop) to other computers that are connected to the first target computer.</span></span>
<span data-ttu-id="7607c-124">Nejbezpečnější způsob konfigurace Windows PowerShell Web Access je umožnit uživatelům přístup jenom k omezeným konfiguracím relací, které jim umožní splnit konkrétní úlohy, které by jinak museli provádět vzdáleně.</span><span class="sxs-lookup"><span data-stu-id="7607c-124">The most secure way to configure Windows PowerShell Web Access is to allow users access only to constrained session configurations that allow them to accomplish specific tasks that they normally need to perform remotely.</span></span>

<span data-ttu-id="7607c-125">Rutiny v odkazuje [rutiny prostředí Windows PowerShell Web Access](cmdlets/web-access-cmdlets.md) umožňují vytvořit sadu pravidel přístupu, které se používají k autorizaci uživatele v bráně Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-125">The cmdlets referenced in [Windows PowerShell Web Access Cmdlets](cmdlets/web-access-cmdlets.md) allow to create a set of access rules which are used to authorize a user on the Windows PowerShell Web Access gateway.</span></span>
<span data-ttu-id="7607c-126">Pravidla se liší od seznamů ACL v cílovém počítači a poskytují další vrstvu zabezpečení webového přístupu.</span><span class="sxs-lookup"><span data-stu-id="7607c-126">The rules are different from the access control lists (ACLs) on the destination computer, and provide an additional layer of security for web access.</span></span>
<span data-ttu-id="7607c-127">Další informace o zabezpečení jsou popsané v následující části.</span><span class="sxs-lookup"><span data-stu-id="7607c-127">More details about security are described in the following section.</span></span>

<span data-ttu-id="7607c-128">Pokud uživatelé nemůžou projít žádnou z předchozích vrstev, obdrží zprávu obecný "přístup byl odepřen" jim v okně prohlížeče.</span><span class="sxs-lookup"><span data-stu-id="7607c-128">If users cannot pass any of the preceding security layers, they receive a generic 'access denied' message in their browser windows.</span></span>
<span data-ttu-id="7607c-129">I když se podrobnosti zabezpečení protokolují na serveru brány, koncoví uživatelé nevidí informace o tom, kolika vrstvami zabezpečení prošli a ve které vrstvě došlo k chybě přihlášení nebo ověření.</span><span class="sxs-lookup"><span data-stu-id="7607c-129">Although security details are logged on the gateway server, end users are not shown information about how many security layers they passed, or at which layer the sign-in or authentication failure occurred.</span></span>

<span data-ttu-id="7607c-130">Další informace o konfiguraci autorizačních pravidel najdete v tématu [konfigurací autorizačních pravidel](#configuring-authorization-rules-and-site-security) v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="7607c-130">For more information about configuring authorization rules, see [configuring authorization rules](#configuring-authorization-rules-and-site-security) in this topic.</span></span>

### <a name="security"></a><span data-ttu-id="7607c-131">Zabezpečení</span><span class="sxs-lookup"><span data-stu-id="7607c-131">Security</span></span>

<span data-ttu-id="7607c-132">Model zabezpečení Windows PowerShell Web Access má čtyři vrstvy mezi koncovým uživatelem webové konzoly a cílový počítač.</span><span class="sxs-lookup"><span data-stu-id="7607c-132">The Windows PowerShell Web Access security model has four layers between an end user of the web-based console, and a target computer.</span></span>
<span data-ttu-id="7607c-133">Windows PowerShell Web Access správci mohou přidávat další vrstvy zabezpečení prostřednictvím další konfigurace v konzole Správce služby IIS.</span><span class="sxs-lookup"><span data-stu-id="7607c-133">Windows PowerShell Web Access administrators can add security layers through additional configuration in the IIS Manager console.</span></span>
<span data-ttu-id="7607c-134">Další informace o zabezpečení webů v konzole Správce služby IIS najdete v tématu [konfigurace zabezpečení webového serveru (IIS 7)](https://technet.microsoft.com/library/cc731278).</span><span class="sxs-lookup"><span data-stu-id="7607c-134">For more information about securing websites in the IIS Manager console, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278).</span></span>
<span data-ttu-id="7607c-135">Další informace o službě IIS osvědčené postupy a brání útoky DOS, najdete v části [osvědčené postupy pro předcházení útokům na dostupnost služby](https://technet.microsoft.com/library/cc750213).</span><span class="sxs-lookup"><span data-stu-id="7607c-135">For more information about IIS best practices and preventing denial-of-service attacks, see [Best Practices for Preventing DoS/Denial of Service Attacks](https://technet.microsoft.com/library/cc750213).</span></span>
<span data-ttu-id="7607c-136">Správce může taky koupit a nainstalovat další maloobchodní software pro ověřování.</span><span class="sxs-lookup"><span data-stu-id="7607c-136">An administrator can also buy and install additional retail authentication software.</span></span>

<span data-ttu-id="7607c-137">Následující tabulka popisuje čtyři vrstvy zabezpečení mezi koncovými uživateli a cílovými počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-137">The following table describes the four layers of security between end users and target computers.</span></span>

|<span data-ttu-id="7607c-138">Úroveň</span><span class="sxs-lookup"><span data-stu-id="7607c-138">Level</span></span>|<span data-ttu-id="7607c-139">Vrstva</span><span class="sxs-lookup"><span data-stu-id="7607c-139">Layer</span></span>|
|-|-|
|<span data-ttu-id="7607c-140">1</span><span class="sxs-lookup"><span data-stu-id="7607c-140">1</span></span>|[<span data-ttu-id="7607c-141">funkce zabezpečení webového serveru IIS</span><span class="sxs-lookup"><span data-stu-id="7607c-141">iis web server security features</span></span>](#iis-web-server-security-features)|
|<span data-ttu-id="7607c-142">2</span><span class="sxs-lookup"><span data-stu-id="7607c-142">2</span></span>|[<span data-ttu-id="7607c-143">ověřování založené na formulářích brány Windows powershell webový přístup</span><span class="sxs-lookup"><span data-stu-id="7607c-143">windows powershell web access forms-based gateway authentication</span></span>](#windows-powershell-web-access-forms-based-gateway-authentication)|
|<span data-ttu-id="7607c-144">3</span><span class="sxs-lookup"><span data-stu-id="7607c-144">3</span></span>|[<span data-ttu-id="7607c-145">Windows powershell web access autorizační pravidla</span><span class="sxs-lookup"><span data-stu-id="7607c-145">windows powershell web access authorization rules</span></span>](#windows-powershell-web-access-authorization-rules)|
|<span data-ttu-id="7607c-146">4</span><span class="sxs-lookup"><span data-stu-id="7607c-146">4</span></span>|[<span data-ttu-id="7607c-147">Cíl ověřování a autorizační pravidla</span><span class="sxs-lookup"><span data-stu-id="7607c-147">target authentication and authorization rules</span></span>](#target-authentication-and-authorization-rules)|

<span data-ttu-id="7607c-148">Podrobné informace o každé vrstvě lze nalézt v těchto položek:</span><span class="sxs-lookup"><span data-stu-id="7607c-148">Detailed information about each layer can be found under the following headings:</span></span>

#### <a name="iis-web-server-security-features"></a><span data-ttu-id="7607c-149">Funkce zabezpečení webového serveru IIS</span><span class="sxs-lookup"><span data-stu-id="7607c-149">IIS Web Server security features</span></span>

<span data-ttu-id="7607c-150">Windows PowerShell Web Access uživatelé musí vždycky zadat uživatelské jméno a heslo k ověření své účty v bráně.</span><span class="sxs-lookup"><span data-stu-id="7607c-150">Windows PowerShell Web Access users must always provide a user name and password to authenticate their accounts on the gateway.</span></span>
<span data-ttu-id="7607c-151">Však správce Windows PowerShell Web Access můžete také zapnout volitelné ověření klientského certifikátu zapnout nebo vypnout, najdete v tématu [nainstalovat a používat windows powershell web Accessu](install-and-use-windows-powershell-web-access.md) povolit testovací certifikát a novější, jak nakonfigurovat pravý certifikát).</span><span class="sxs-lookup"><span data-stu-id="7607c-151">However, Windows PowerShell Web Access administrators can also turn optional client certificate authentication on or off, see [install and use windows powershell web access](install-and-use-windows-powershell-web-access.md) to enable a test certificate and, later, how to configure a genuine certificate).</span></span>

<span data-ttu-id="7607c-152">Volitelná funkce klientského certifikátu vyžaduje, aby koncoví uživatelé měli kromě svých uživatelských jmen a hesel i platný klientský certifikát, a je součástí konfigurace webového serveru (IIS).</span><span class="sxs-lookup"><span data-stu-id="7607c-152">The optional client certificate feature requires end users to have a valid client certificate, in addition to their user names and passwords, and is part of Web Server (IIS) configuration.</span></span>
<span data-ttu-id="7607c-153">Pokud je vrstva klientského certifikátu povolená, přihlašovací stránce Windows PowerShell Web Access vyzve uživatele k poskytování platné certifikáty, než se vyhodnocují své přihlašovací údaje.</span><span class="sxs-lookup"><span data-stu-id="7607c-153">When the client certificate layer is enabled, the Windows PowerShell Web Access sign-in page prompts users to provide valid certificates before their sign-in credentials are evaluated.</span></span>
<span data-ttu-id="7607c-154">Ověření klientského certifikátu automaticky vyhledává klientský certifikát.</span><span class="sxs-lookup"><span data-stu-id="7607c-154">Client certificate authentication automatically checks for the client certificate.</span></span>
<span data-ttu-id="7607c-155">Pokud se platný certifikát nenajde, Windows PowerShell Web Access informuje uživatele, aby ho mohli poskytnout certifikát.</span><span class="sxs-lookup"><span data-stu-id="7607c-155">If a valid certificate is not found, Windows PowerShell Web Access informs users, so they can provide the certificate.</span></span>
<span data-ttu-id="7607c-156">Pokud se najde platný klientský certifikát, Windows PowerShell Web Access otevře na stránce přihlášení pro uživatele pro poskytování svá uživatelská jména a hesla.</span><span class="sxs-lookup"><span data-stu-id="7607c-156">If a valid client certificate is found, Windows PowerShell Web Access opens the sign-in page for users to provide their user names and passwords.</span></span>

<span data-ttu-id="7607c-157">Toto je příkladem nastavení dalšího ověření zabezpečení, které nabízí Webový Server IIS.</span><span class="sxs-lookup"><span data-stu-id="7607c-157">This is one example of additional security settings that are offered by IIS Web Server.</span></span>
<span data-ttu-id="7607c-158">Další informace o jiných funkcích zabezpečení služby IIS najdete v tématu [konfigurace zabezpečení webového serveru (IIS 7)](https://technet.microsoft.com/library/cc731278)</span><span class="sxs-lookup"><span data-stu-id="7607c-158">For more information about other IIS security features, see [Configure Web Server Security (IIS 7)](https://technet.microsoft.com/library/cc731278)</span></span>

#### <a name="windows-powershell-web-access-forms-based-gateway-authentication"></a><span data-ttu-id="7607c-159">Ověřování pomocí formulářů brány Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="7607c-159">Windows PowerShell Web Access forms-based gateway authentication</span></span>

<span data-ttu-id="7607c-160">Windows PowerShell Web Access přihlašovací stránka vyžaduje sadu pověření (uživatelské jméno a heslo) a nabízí uživatelům možnost poskytnout jiná pověření pro cílový počítač.</span><span class="sxs-lookup"><span data-stu-id="7607c-160">The Windows PowerShell Web Access sign-in page requires a set of credentials (user name and password) and offers users the option of providing different credentials for the target computer.</span></span>
<span data-ttu-id="7607c-161">Pokud uživatel jiná pověření neposkytne, primární uživatelské jméno a heslo použitá pro připojení k bráně se použijí i pro připojení k cílovému počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-161">If the user does not provide alternate credentials, the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="7607c-162">Požadovaná pověření se ověřují v bráně Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-162">The required credentials are authenticated on the Windows PowerShell Web Access gateway.</span></span>
<span data-ttu-id="7607c-163">Tyto přihlašovací údaje musí být platné uživatelské účty na buď místní Windows PowerShell Web Access serveru brány, nebo ve službě Active Directory.</span><span class="sxs-lookup"><span data-stu-id="7607c-163">These credentials must be valid user accounts on either the local Windows PowerShell Web Access gateway server, or in Active Directory.</span></span>

#### <a name="windows-powershell-web-access-authorization-rules"></a><span data-ttu-id="7607c-164">Windows PowerShell Web Access autorizační pravidla</span><span class="sxs-lookup"><span data-stu-id="7607c-164">Windows PowerShell Web Access authorization rules</span></span>

<span data-ttu-id="7607c-165">Po ověření uživatele v bráně Windows PowerShell Web Access zkontrolujte autorizační pravidla, chcete-li ověřit, zda má uživatel přístup k požadovanému cílovému počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-165">After a user is authenticated at the gateway, Windows PowerShell Web Access checks authorization rules to verify if the user has access to the requested target computer.</span></span>
<span data-ttu-id="7607c-166">Po úspěšném ověření přihlašovacích údajů uživatele předají k cílovému počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-166">After successful authorization, the user's credentials are passed along to the target computer.</span></span>

<span data-ttu-id="7607c-167">Tato pravidla se vyhodnocují jenom po ověření uživatele bránou a před tím, než může dojít k ověření uživatele v cílovém počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-167">These rules are evaluated only after a user has been authenticated by the gateway, and before a user can be authenticated on a target computer.</span></span>

#### <a name="target-authentication-and-authorization-rules"></a><span data-ttu-id="7607c-168">Cílové ověřování a autorizační pravidla</span><span class="sxs-lookup"><span data-stu-id="7607c-168">Target authentication and authorization rules</span></span>

<span data-ttu-id="7607c-169">Poslední vrstva zabezpečení pro Windows PowerShell Web Access je konfigurace cílového počítače vlastní zabezpečení.</span><span class="sxs-lookup"><span data-stu-id="7607c-169">The final layer of security for Windows PowerShell Web Access is the target computer's own security configuration.</span></span>
<span data-ttu-id="7607c-170">Uživatelé musí mít příslušná přístupová práva nakonfigurovaná na cílovém počítači a také v autorizačních pravidlech Windows PowerShell Web Access, spustit webovou konzolu prostředí Windows PowerShell, která ovlivňuje cílový počítač prostřednictvím Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-170">Users must have the appropriate access rights configured on the target computer, and also in the Windows PowerShell Web Access authorization rules, to run a Windows PowerShell web-based console that affects a target computer through Windows PowerShell Web Access.</span></span>

<span data-ttu-id="7607c-171">Tato vrstva nabízí stejné mechanismy zabezpečení, které by vyhodnocovaly pokusy o připojení, pokud se uživatelé pokusili vytvořit vzdálené relace prostředí Windows PowerShell k cílovému počítači z prostředí Windows PowerShell spuštěním [Enter-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/Enter-PSSession) nebo [New-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/new-pssession) rutiny.</span><span class="sxs-lookup"><span data-stu-id="7607c-171">This layer offers the same security mechanisms that would evaluate connection attempts if users tried to create a remote Windows PowerShell session to a target computer from within Windows PowerShell by running the [Enter-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/Enter-PSSession) or [New-PSSession](https://msdn.microsoft.com/powershell/reference/5.1/microsoft.powershell.core/new-pssession) cmdlets.</span></span>

<span data-ttu-id="7607c-172">Ve výchozím nastavení používá Windows PowerShell Web Access primární uživatelské jméno a heslo pro ověřování na bráně a cílovým počítačem.</span><span class="sxs-lookup"><span data-stu-id="7607c-172">By default, Windows PowerShell Web Access uses the primary user name and password for authentication on both the gateway and the target computer.</span></span>
<span data-ttu-id="7607c-173">Webová přihlašovací stránce v části s názvem **volitelná nastavení připojení**, nabízí uživatelům možnost poskytnout jiná pověření pro cílový počítač, pokud jsou požadována.</span><span class="sxs-lookup"><span data-stu-id="7607c-173">The web-based sign-in page , in a section titled **Optional connection settings**, offers users the option of providing different credentials for the target computer , if they are required.</span></span>
<span data-ttu-id="7607c-174">Pokud uživatel neposkytne alternativní přihlašovací údaje, primární uživatelské jméno a heslo, které se používají k připojení k bráně se také používají k připojení k cílovému počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-174">If the user does not provide alternate credentials , the primary user name and password that are used to connect to the gateway are also used to connect to the target computer.</span></span>

<span data-ttu-id="7607c-175">Autorizační pravidla se dají použít k povolení přístupu uživatelům ke konfiguraci konkrétní relace.</span><span class="sxs-lookup"><span data-stu-id="7607c-175">Authorization rules can be used to allow users access to a particular session configuration.</span></span>
<span data-ttu-id="7607c-176">Můžete vytvořit _omezený prostředí runspace_ nebo konfigurace relace pro Windows PowerShell Web Access a povolit konkrétním uživatelům se při přihlášení do Windows PowerShell Web Access připojit pouze ke konkrétním konfiguracím relací.</span><span class="sxs-lookup"><span data-stu-id="7607c-176">You can create _restricted runspaces_ or session configurations for Windows PowerShell Web Access , and allow specific users to connect only to specific session configurations when they sign in to Windows PowerShell Web Access.</span></span>
<span data-ttu-id="7607c-177">Můžete použít seznamy řízení přístupu (ACL) k určení uživatelů, kteří mají přístup ke konkrétním koncovým bodům a dále omezit přístup k koncový bod pro konkrétní skupinu uživatelů pomocí autorizačních pravidel popsaných v této části.</span><span class="sxs-lookup"><span data-stu-id="7607c-177">You can use access control lists (ACLs) to determine which users have access to specific endpoints , and further restrict access to the endpoint for a specific set of users by using authorization rules described in this section.</span></span>
<span data-ttu-id="7607c-178">Další informace o prostředích runspace s omezeným přístupem najdete v tématu [vytváření omezené prostředí runspace](https://msdn.microsoft.com/en-us/library/dn614668).</span><span class="sxs-lookup"><span data-stu-id="7607c-178">For more information about restricted runspaces, see [Creating a constrained runspace](https://msdn.microsoft.com/en-us/library/dn614668).</span></span>

### <a name="configuring-authorization-rules"></a><span data-ttu-id="7607c-179">Konfigurace autorizačních pravidel</span><span class="sxs-lookup"><span data-stu-id="7607c-179">Configuring authorization rules</span></span>

<span data-ttu-id="7607c-180">Správci můžou chtít stejné autorizační pravidlo pro Windows PowerShell Web Access uživatele, kteří již je definována v jejich prostředí pro vzdálenou správu prostředí Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7607c-180">Administrators likely want the same authorization rule for Windows PowerShell Web Access users that is already defined in their environment for Windows PowerShell remote management.</span></span>
<span data-ttu-id="7607c-181">První postup v této části popisuje, jak přidat pravidlo zabezpečené autorizace udělující přístup jednomu uživateli, přihlašujícímu se ke správě jednoho počítače a v rámci konfigurace jedné relace.</span><span class="sxs-lookup"><span data-stu-id="7607c-181">The first procedure in this section describes how to add a secure authorization rule that grants access to one user , signing in to manage one computer , and within a single session configuration.</span></span>
<span data-ttu-id="7607c-182">Druhý postup popisuje, jak odebrat autorizační pravidlo, které už není potřeba.</span><span class="sxs-lookup"><span data-stu-id="7607c-182">The second procedure describes how to remove an authorization rule that is no longer needed.</span></span>

<span data-ttu-id="7607c-183">Pokud budete chtít povolit konkrétním uživatelům práci jenom v omezeném prostředí runspace ve Windows PowerShell Web Accessu pomocí vlastních konfigurací relace, vytvořte vlastní konfigurace relací předtím, než přidáte autorizační pravidla, která na ně odkazují.</span><span class="sxs-lookup"><span data-stu-id="7607c-183">If you plan to use custom session configurations to allow specific users to work only within restricted runspaces in Windows PowerShell Web Access , create your custom session configurations before you add authorization rules that refer to them.</span></span>
<span data-ttu-id="7607c-184">Rutiny Windows PowerShell Web Access nelze použít k vytvoření vlastních konfigurací relací.</span><span class="sxs-lookup"><span data-stu-id="7607c-184">You cannot use the Windows PowerShell Web Access cmdlets to create custom session configurations.</span></span>
<span data-ttu-id="7607c-185">Další informace o vytváření vlastních konfigurací relací najdete v tématu [about_Session_Configuration_Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="7607c-185">For more information about creating custom session configurations , see [about_Session_Configuration_Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

<span data-ttu-id="7607c-186">Rutiny Windows PowerShell Web Access podporují jeden zástupný znak – hvězdičku ( \* ).</span><span class="sxs-lookup"><span data-stu-id="7607c-186">Windows PowerShell Web Access cmdlets support one wildcard character , an asterisk ( \* ).</span></span>
<span data-ttu-id="7607c-187">Zástupné znaky uvnitř řetězců se nepodporují. Na jednu položku (uživatele, počítače nebo konfigurace relací) použijte jednu hvězdičku.</span><span class="sxs-lookup"><span data-stu-id="7607c-187">Wildcard characters within strings are not supported; use a single asterisk per property (users, computers, or session configurations).</span></span>

> <span data-ttu-id="7607c-188">**Poznámka:**</span><span class="sxs-lookup"><span data-stu-id="7607c-188">**Note**</span></span>
>
> <span data-ttu-id="7607c-189">Další způsoby použití autorizačních pravidel pro udělení přístupu uživatelům a zabezpečení prostředí Windows PowerShell Web Access, najdete v tématu [Další příklady scénářů autorizační pravidlo](#other-authorization-rule-scenario-examples) v tomto tématu.</span><span class="sxs-lookup"><span data-stu-id="7607c-189">For more ways you can use authorization rules to grant access to users and help secure the Windows PowerShell Web Access environment , see [other authorization rule scenario examples](#other-authorization-rule-scenario-examples) in this topic.</span></span>

#### <a name="to-add-a-restrictive-authorization-rule"></a><span data-ttu-id="7607c-190">Přidání omezujícího autorizačního pravidla</span><span class="sxs-lookup"><span data-stu-id="7607c-190">To add a restrictive authorization rule</span></span>

1. <span data-ttu-id="7607c-191">Proveďte jednu z následujících způsobů otevřete relaci prostředí Windows PowerShell se zvýšenými uživatelskými právy.</span><span class="sxs-lookup"><span data-stu-id="7607c-191">Do one of the following to open a Windows PowerShell session with elevated user rights.</span></span>

    - <span data-ttu-id="7607c-192">Na ploše Windows klikněte pravým tlačítkem na **prostředí Windows PowerShell** na hlavním panelu a pak klikněte na tlačítko **spustit jako správce**.</span><span class="sxs-lookup"><span data-stu-id="7607c-192">On the Windows desktop, right-click **Windows PowerShell** on the taskbar , and then click **Run as Administrator**.</span></span>

    - <span data-ttu-id="7607c-193">V systému Windows **spustit** obrazovky, klikněte pravým tlačítkem na **prostředí Windows PowerShell** a potom klikněte na **spustit jako správce**.</span><span class="sxs-lookup"><span data-stu-id="7607c-193">On the Windows **Start** screen, right-click **Windows PowerShell** , and then click **Run as Administrator**.</span></span>

2. <span data-ttu-id="7607c-194">**Volitelný krok** pro omezení přístupu uživatelů s použitím konfigurací relace:</span><span class="sxs-lookup"><span data-stu-id="7607c-194">**Optional step** For restricting user access by using session configurations:</span></span>

    <span data-ttu-id="7607c-195">Ověřte, že konfigurace relace, které chcete použít, již existuje ve vašich pravidlech.</span><span class="sxs-lookup"><span data-stu-id="7607c-195">Verify that the session configurations that you want to use , already exist in your rules .</span></span>
<span data-ttu-id="7607c-196">Pokud se ještě nejsou vytvořené, použijte pokyny pro vytvoření konfigurací relace v [about_Session_Configuration_Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span><span class="sxs-lookup"><span data-stu-id="7607c-196">If they have not yet been created , use instructions for creating session configurations in [about_Session_Configuration_Files](https://msdn.microsoft.com/en-us/powershell/reference/5.1/microsoft.powershell.core/about/about_session_configuration_files).</span></span>

3. <span data-ttu-id="7607c-197">Toto autorizační pravidlo umožňuje konkrétní přístup uživatele k jednomu počítači v síti, ke kterým mají obvykle přístup, včetně přístupu ke konfiguraci konkrétní relace, která je omezená na uživatele '™ s typické skriptování a rutiny potřebám.</span><span class="sxs-lookup"><span data-stu-id="7607c-197">This authorization rule allows a specific user access to one computer on the network to which they typically have access, with access to a specific session configuration that is scoped to the user'™s typical scripting and cmdlet needs.</span></span> <span data-ttu-id="7607c-198">Zadejte následující příkaz a stiskněte klávesu **Enter**.</span><span class="sxs-lookup"><span data-stu-id="7607c-198">Type the following, and then press **Enter**.</span></span>

```powershell
Add-PswaAuthorizationRule -UserName <domain\user | computer\user> -ComputerName <computer_name> -ConfigurationName <session_configuration_name>
```

  - <span data-ttu-id="7607c-199">V následujícím příkladu, uživateli se jménem _JSmith_ v _Contoso_ domény je uděleno oprávnění ke správě počítače _Contoso_214_a používá konfiguraci relace s názvem _NewAdminsOnly_.</span><span class="sxs-lookup"><span data-stu-id="7607c-199">In the following example, a user named _JSmith_ in the _Contoso_ domain is granted access to manage the computer _Contoso_214_, and use a session configuration named _NewAdminsOnly_.</span></span>

```powershell
Add-PswaAuthorizationRule -UserName 'Contoso\JSmith' -ComputerName Contoso_214 -ConfigurationName NewAdminsOnly
```

4. <span data-ttu-id="7607c-200">Ověřte, že pravidlo vytvořila spuštěním **Get-PswaAuthorizationRule** rutiny nebo **Test-PswaAuthorizationRule - UserName &lt;domény\\uživatele | počítače\\ Uživatel&gt; - ComputerName** &lt;název_počítače&gt;.</span><span class="sxs-lookup"><span data-stu-id="7607c-200">Verify that the rule has been created by running either the **Get-PswaAuthorizationRule** cmdlet, or **Test-PswaAuthorizationRule -UserName &lt;domain\\user | computer\\user&gt; -ComputerName** &lt;computer_name&gt;.</span></span> <span data-ttu-id="7607c-201">Například **Test-PswaAuthorizationRule - UserName Contoso\\JSmith - ComputerName Contoso_214**.</span><span class="sxs-lookup"><span data-stu-id="7607c-201">For example, **Test-PswaAuthorizationRule -UserName Contoso\\JSmith -ComputerName Contoso_214**.</span></span>

#### <a name="to-remove-an-authorization-rule"></a><span data-ttu-id="7607c-202">Odebrání autorizačního pravidla</span><span class="sxs-lookup"><span data-stu-id="7607c-202">To remove an authorization rule</span></span>

1. <span data-ttu-id="7607c-203">Pokud relaci prostředí Windows PowerShell ještě není otevřené, najdete v kroku 1 tématu [přidání omezujícího autorizačního pravidla](#to-add-a-restrictive-authorization-rule) v této části.</span><span class="sxs-lookup"><span data-stu-id="7607c-203">If a Windows PowerShell session is not already open, see step 1 of [to add a restrictive authorization rule](#to-add-a-restrictive-authorization-rule) in this section.</span></span>

2. <span data-ttu-id="7607c-204">Zadejte následující příkaz a stiskněte klávesu **Enter**, kde *pravidlo ID* představuje jedinečné ID číslo pravidla, které chcete odebrat.</span><span class="sxs-lookup"><span data-stu-id="7607c-204">Type the following, and then press **Enter**, where *rule ID* represents the unique ID number of the rule that you want to remove.</span></span>

```powershell
Remove-PswaAuthorizationRule -ID <rule ID>
```

<span data-ttu-id="7607c-205">Případně, pokud ID číslo neznáte, ale znáte popisný název pravidla, které chcete odebrat, můžete získat název pravidla a zřetězit ho do `Remove-PswaAuthorizationRule` rutiny pro odebrání pravidla, jak je znázorněno v následujícím příkladu: `Get-PswaAuthorizationRule -RuleName <rule-name> | Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="7607c-205">Alternatively, if you do not know the ID number, but know the friendly name of the rule you want to remove, you can get the name of the rule, and pipe it to the `Remove-PswaAuthorizationRule` cmdlet to remove the rule, as shown in the following example: `Get-PswaAuthorizationRule -RuleName <rule-name> | Remove-PswaAuthorizationRule`.</span></span>

><span data-ttu-id="7607c-206">**Poznámka:**:</span><span class="sxs-lookup"><span data-stu-id="7607c-206">**Note**:</span></span>
>
><span data-ttu-id="7607c-207">Zobrazí se výzva k potvrzení odstranění zadaného autorizačního pravidla; Pravidlo se odstraní po stisknutí klávesy **Enter**.</span><span class="sxs-lookup"><span data-stu-id="7607c-207">You are not prompted to confirm whether you want to delete the specified authorization rule; the rule is deleted when you press **Enter**.</span></span> <span data-ttu-id="7607c-208">Ujistěte se, že chcete odebrat autorizační pravidlo dřív, než spustíte rutinu `Remove-PswaAuthorizationRule`.</span><span class="sxs-lookup"><span data-stu-id="7607c-208">Be sure that you want to remove the authorization rule before running the `Remove-PswaAuthorizationRule` cmdlet.</span></span>

#### <a name="other-authorization-rule-scenario-examples"></a><span data-ttu-id="7607c-209">Další příklady scénářů s autorizačními pravidly</span><span class="sxs-lookup"><span data-stu-id="7607c-209">Other authorization rule scenario examples</span></span>

<span data-ttu-id="7607c-210">Každé relaci prostředí Windows PowerShell používá konfigurace relace; Pokud není určen pro relaci, prostředí Windows PowerShell používá výchozí integrovanou konfiguraci relace prostředí Windows PowerShell, označuje jako Microsoft.PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7607c-210">Every Windows PowerShell session uses a session configuration; if one is not specified for a session, Windows PowerShell uses the default, built-in Windows PowerShell session configuration, called Microsoft.PowerShell.</span></span> <span data-ttu-id="7607c-211">Výchozí konfigurace relace zahrnuje všechny rutiny, které jsou v počítači k dispozici.</span><span class="sxs-lookup"><span data-stu-id="7607c-211">The default session configuration includes all cmdlets that are available on a computer.</span></span> <span data-ttu-id="7607c-212">Správci můžou omezit přístup u všech počítačů tak, že definují konfiguraci relace prostředí runspace s omezeným přístupem (omezeným rozsahem rutin a úloh, které jejich koncoví uživatelé můžou provádět).</span><span class="sxs-lookup"><span data-stu-id="7607c-212">Administrators can restrict access to all computers by defining a session configuration with a restricted runspace (a limited range of cmdlets and tasks that their end users could perform).</span></span> <span data-ttu-id="7607c-213">Uživatel, který je udělen přístup k jednomu počítači s úplným jazykovým přístupem nebo jenom Vzdálená správa rutiny prostředí Windows PowerShell můžete připojit k jiné počítače, které jsou připojené k prvnímu počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-213">A user who is granted access to one computer with either full language access or only the Windows PowerShell remote management cmdlets can connect to other computers that are connected to the first computer.</span></span> <span data-ttu-id="7607c-214">Definování omezeném prostředí runspace může zabránit uživatelům v přístupu k jiným počítačům z jejich povoleného prostředí runspace prostředí Windows PowerShell a zvyšuje zabezpečení vašeho prostředí Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-214">Defining a restricted runspace can prevent users from accessing other computers from their allowed Windows PowerShell runspace, and improves the security of your Windows PowerShell Web Access environment.</span></span> <span data-ttu-id="7607c-215">Konfigurace relace můžete distribuovat (pomocí zásad skupiny) do všech počítačů, které chtějí správci zpřístupnit prostřednictvím Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-215">The session configuration can be distributed (by using Group Policy) to all computers that administrators want to make accessible through Windows PowerShell Web Access.</span></span> <span data-ttu-id="7607c-216">Další informace o konfiguracích relace najdete v tématu [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span><span class="sxs-lookup"><span data-stu-id="7607c-216">For more information about session configurations, see [about_Session_Configurations](https://technet.microsoft.com/library/dd819508.aspx).</span></span>
<span data-ttu-id="7607c-217">Toto jsou některé z příkladů tohoto scénáře.</span><span class="sxs-lookup"><span data-stu-id="7607c-217">The following are some examples of this scenario.</span></span>

- <span data-ttu-id="7607c-218">Správce vytvoří koncový bod s názvem **Pswakoncovybod**, s omezeném prostředí runspace.</span><span class="sxs-lookup"><span data-stu-id="7607c-218">An administrator creates an endpoint, called **PswaEndpoint**, with a restricted runspace.</span></span> <span data-ttu-id="7607c-219">Pak správce vytvoří pravidlo  **\*,\*, Pswakoncovybod**a distribuuje koncový bod do jiných počítačů.</span><span class="sxs-lookup"><span data-stu-id="7607c-219">Then, the administrator creates a rule, **\*,\*,PswaEndpoint**, and distributes the endpoint to other computers.</span></span> <span data-ttu-id="7607c-220">Toto pravidlo umožňuje všem uživatelům přistupovat ke všem počítačům s koncovým bodem **Pswakoncovybod**.</span><span class="sxs-lookup"><span data-stu-id="7607c-220">The rule allows all users to access all computers with the endpoint **PswaEndpoint**.</span></span> <span data-ttu-id="7607c-221">Pokud se jedná o jediné autorizační pravidlo definované v sadě pravidel, nebudou počítače bez tohoto koncového bodu přístupné.</span><span class="sxs-lookup"><span data-stu-id="7607c-221">If this is the only authorization rule defined in the rule set, computers without that endpoint would not be accessible.</span></span>

- <span data-ttu-id="7607c-222">Správce vytvořil koncový bod s prostředím runspace s omezeným přístupem s názvem **Pswakoncovybod**a chce omezit přístup k určitým uživatelům.</span><span class="sxs-lookup"><span data-stu-id="7607c-222">The administrator created an endpoint with a restricted runspace called **PswaEndpoint**,and wants to restrict access to specific users.</span></span> <span data-ttu-id="7607c-223">Správce vytvoří skupinu uživatelů s názvem **podporauroven1**a definuje následující pravidlo: **podporauroven1,\*, Pswakoncovybod**.</span><span class="sxs-lookup"><span data-stu-id="7607c-223">The administrator creates a group of users called **Level1Support**, and defines the following rule: **Level1Support,\*,PswaEndpoint**.</span></span> <span data-ttu-id="7607c-224">Pravidlo udělí všem uživatelům ve skupině **podporauroven1** přístup ke všem počítačům s **Pswakoncovybod** konfigurace.</span><span class="sxs-lookup"><span data-stu-id="7607c-224">The rule grants any users in the group **Level1Support** access to all computers with the **PswaEndpoint** configuration.</span></span> <span data-ttu-id="7607c-225">Podobně se dá omezit přístup ke konkrétní sadě počítačů.</span><span class="sxs-lookup"><span data-stu-id="7607c-225">Similarly, access can be restricted to a specific set of computers.</span></span>

- <span data-ttu-id="7607c-226">Někteří správci poskytují určitým uživatelům širší přístup než jiným.</span><span class="sxs-lookup"><span data-stu-id="7607c-226">Some administrators provide certain users more access than others.</span></span> <span data-ttu-id="7607c-227">Správce například vytvoří dvě skupiny uživatelů, **Admins** a **Zakladnipodpora**.</span><span class="sxs-lookup"><span data-stu-id="7607c-227">For example, an administrator creates two user groups, **Admins** and **BasicSupport**.</span></span> <span data-ttu-id="7607c-228">Správce taky vytvoří koncový bod s prostředím runspace s omezeným přístupem volána s **Pswakoncovybod**a definuje následující dvě pravidla: **Admins,\*,\***  a  **Zakladnipodpora,\*, Pswakoncovybod**.</span><span class="sxs-lookup"><span data-stu-id="7607c-228">The administrator also creates an endpoint with a restricted runspace called **PswaEndpoint**, and defines the following two rules: **Admins,\*,\*** and **BasicSupport,\*,PswaEndpoint**.</span></span> <span data-ttu-id="7607c-229">První pravidlo poskytuje všem uživatelům ve **správce** přístup ke všem počítačům a druhé pravidlo poskytuje všem uživatelům ve **Zakladnipodpora** přístup jenom k těm počítačům s  **Pswakoncovybod**.</span><span class="sxs-lookup"><span data-stu-id="7607c-229">The first rule provides all users in the **Admin** group access to all computers, and the second rule provides all users in the **BasicSupport** group access only to those computers with **PswaEndpoint**.</span></span>

- <span data-ttu-id="7607c-230">Správce nastavil privátní testovací prostředí a chce umožnit všem oprávněným uživatelům v síti přístup ke všem počítačům v síti, ke kterým mají obvykle přístup, včetně přístupu ke všem konfiguracím relace, ke kterým obvykle přistupují.</span><span class="sxs-lookup"><span data-stu-id="7607c-230">An administrator has set up a private test environment, and wants to allow all authorized network users access to all computers on the network to which they typically have access, with access to all session configurations to which they typically have access.</span></span> <span data-ttu-id="7607c-231">Protože se jedná o privátní testovací prostředí, správce vytvoří autorizační pravidlo, které není zabezpečené.</span><span class="sxs-lookup"><span data-stu-id="7607c-231">Because this is a private test environment, the administrator creates an authorization rule that is not secure.</span></span>
  - <span data-ttu-id="7607c-232">Správce spustí rutinu `Add-PswaAuthorizationRule * * *`, která používá zástupný znak  **\***  k reprezentaci všech uživatelů, všechny počítače a všechny konfigurace.</span><span class="sxs-lookup"><span data-stu-id="7607c-232">The administrator runs the cmdlet `Add-PswaAuthorizationRule * * *`, which uses the wildcard character **\*** to represent all users, all computers, and all configurations.</span></span>
  - <span data-ttu-id="7607c-233">Toto pravidlo je ekvivalentem tohoto: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span><span class="sxs-lookup"><span data-stu-id="7607c-233">This rule is the equivalent of the following: `Add-PswaAuthorizationRule -UserName * -ComputerName * -ConfigurationName *`.</span></span>

  ><span data-ttu-id="7607c-234">**Poznámka:**:</span><span class="sxs-lookup"><span data-stu-id="7607c-234">**Note**:</span></span>
  >
  ><span data-ttu-id="7607c-235">Toto pravidlo se nedoporučuje v zabezpečeném prostředí a obchází vrstvu zabezpečení poskytované Windows PowerShell Web Access autorizační pravidla.</span><span class="sxs-lookup"><span data-stu-id="7607c-235">This rule is not recommended in a secure environment, and bypasses the authorization rule layer of security provided by Windows PowerShell Web Access.</span></span>

- <span data-ttu-id="7607c-236">Správce musí povolit uživatelům, aby se mohli připojovat k cílovým počítačům v prostředí, které obsahuje pracovní skupiny a domény, kde se počítače pracovních skupin občas používají pro připojení k cílovým počítačům v doménách a počítače v doménách se příležitostně používají pro připojení k cílovým počítačům v pracovních skupinách.</span><span class="sxs-lookup"><span data-stu-id="7607c-236">An administrator must allow users to connect to target computers in an environment that includes both workgroups and domains, where workgroup computers are occasionally used to connect to target computers in domains, and computers in domains are occasionally used to connect to target computers in workgroups.</span></span> <span data-ttu-id="7607c-237">Správce má server brány, *PswaServer*, v pracovní skupině a cílový počítač *srv1.contoso.com* je v doméně.</span><span class="sxs-lookup"><span data-stu-id="7607c-237">The administrator has a gateway server, *PswaServer*, in a workgroup; and target computer *srv1.contoso.com* is in a domain.</span></span> <span data-ttu-id="7607c-238">Uživatel *Jan* je oprávněný místní uživatel na serveru brány pracovní skupiny a cílovým počítačem.</span><span class="sxs-lookup"><span data-stu-id="7607c-238">User *Chris* is an authorized local user on both the workgroup gateway server and the target computer.</span></span> <span data-ttu-id="7607c-239">Jeho uživatelské jméno na serveru pracovní skupiny je *Janlocal*; a jeho uživatelské jméno v cílovém počítači je *contoso\\Jan*.</span><span class="sxs-lookup"><span data-stu-id="7607c-239">His user name on the workgroup server is *chrisLocal*; and his user name on the target computer is *contoso\\chris*.</span></span> <span data-ttu-id="7607c-240">Správce přidá následující pravidlo, aby Janovi autorizoval přístup k srv1.contoso.com.</span><span class="sxs-lookup"><span data-stu-id="7607c-240">To authorize access to srv1.contoso.com for Chris, the administrator adds the following rule.</span></span>

```powershell
Add-PswaAuthorizationRule -userName PswaServer\chrisLocal -computerName srv1.contoso.com -configurationName Microsoft.PowerShell
```

<span data-ttu-id="7607c-241">Předchozí příklad pravidla ověřuje Jana na serveru brány a potom autorizuje jeho přístup k *srv1*.</span><span class="sxs-lookup"><span data-stu-id="7607c-241">The preceding rule example authenticates Chris on the gateway server, and then authorizes his access to *srv1*.</span></span> <span data-ttu-id="7607c-242">Na stránce přihlášení musí Jan zadat druhou sadu pověření v **volitelná nastavení připojení** oblasti (*contoso\\Jan*).</span><span class="sxs-lookup"><span data-stu-id="7607c-242">On the sign-in page, Chris must provide a second set of credentials in the **Optional connection settings** area (*contoso\\chris*).</span></span> <span data-ttu-id="7607c-243">Server brány použije další sadu pověření k jeho ověření v cílovém počítači, *srv1.contoso.com*.</span><span class="sxs-lookup"><span data-stu-id="7607c-243">The gateway server uses the additional set of credentials to authenticate him on the target computer, *srv1.contoso.com*.</span></span>

<span data-ttu-id="7607c-244">V předchozím scénáři Windows PowerShell Web Access vytvoří úspěšné připojení k cílovému počítači pouze po následující byla úspěšná a povolení aspoň jedním autorizačním pravidlem.</span><span class="sxs-lookup"><span data-stu-id="7607c-244">In the preceding scenario, Windows PowerShell Web Access establishes a successful connection to the target computer only after the following have been successful, and allowed by at least one authorization rule.</span></span>

1. <span data-ttu-id="7607c-245">Ověřování na serveru brány pracovní skupiny přidáním uživatelského jména ve formátu *název_serveru*\\*uživatelské_jméno* autorizační pravidlo</span><span class="sxs-lookup"><span data-stu-id="7607c-245">Authentication on the workgroup gateway server by adding a user name in the format *server_name*\\*user_name* to the authorization rule</span></span>

2. <span data-ttu-id="7607c-246">Ověřování v cílovém počítači pomocí alternativních přihlašovacích údajů, které jsou součástí na stránce přihlášení **volitelná nastavení připojení** oblasti</span><span class="sxs-lookup"><span data-stu-id="7607c-246">Authentication on the target computer by using alternate credentials provided on the sign-in page, in the **Optional connection settings** area</span></span>

  ><span data-ttu-id="7607c-247">**Poznámka:**:</span><span class="sxs-lookup"><span data-stu-id="7607c-247">**Note**:</span></span>
  >
  ><span data-ttu-id="7607c-248">Pokud jsou brána a cílové počítače v různých pracovních skupinách nebo doménách, musí se mezi těmito dvěma počítači pracovních skupin, dvěma doménami nebo pracovní skupinou a doménou vytvořit vztah důvěryhodnosti.</span><span class="sxs-lookup"><span data-stu-id="7607c-248">If gateway and target computers are in different workgroups or domains, a trust relationship must be established between the two workgroup computers, the two domains, or between the workgroup and the domain.</span></span> <span data-ttu-id="7607c-249">Tento vztah nelze konfigurovat pomocí rutin Windows PowerShell Web Access autorizačních pravidel.</span><span class="sxs-lookup"><span data-stu-id="7607c-249">This relationship cannot be configured by using Windows PowerShell Web Access authorization rule cmdlets.</span></span> <span data-ttu-id="7607c-250">Autorizační pravidla nedefinují vztah důvěryhodnosti mezi počítači. Jenom autorizují uživatele, aby se mohli připojit ke konkrétním cílovým počítačům a konfiguracím relací.</span><span class="sxs-lookup"><span data-stu-id="7607c-250">Authorization rules do not define a trust relationship between computers; they can only authorize users to connect to specific target computers and session configurations.</span></span> <span data-ttu-id="7607c-251">Další informace o tom, jak konfigurovat vztah důvěryhodnosti mezi různými doménami, najdete v části [vytvoření domény a vztahy důvěryhodnosti doménové struktury](https://technet.microsoft.com/library/cc794775.aspx").</span><span class="sxs-lookup"><span data-stu-id="7607c-251">For more information about how to configure a trust relationship between different domains, see [Creating Domain and Forest Trusts](https://technet.microsoft.com/library/cc794775.aspx").</span></span> <span data-ttu-id="7607c-252">Další informace o tom, jak přidat do seznamu důvěryhodných hostitelů počítače v pracovních skupinách najdete v tématu [Vzdálená správa pomocí Správce serveru](https://technet.microsoft.com/library/dd759202.aspx)</span><span class="sxs-lookup"><span data-stu-id="7607c-252">For more information about how to add workgroup computers to a trusted hosts list, see [Remote Management with Server Manager](https://technet.microsoft.com/library/dd759202.aspx)</span></span>

### <a name="using-a-single-set-of-authorization-rules-for-multiple-sites"></a><span data-ttu-id="7607c-253">Použití jedné sady autorizačních pravidel pro víc lokalit</span><span class="sxs-lookup"><span data-stu-id="7607c-253">Using a single set of authorization rules for multiple sites</span></span>

<span data-ttu-id="7607c-254">Autorizační pravidla jsou uložená v souboru XML.</span><span class="sxs-lookup"><span data-stu-id="7607c-254">Authorization rules are stored in an XML file.</span></span> <span data-ttu-id="7607c-255">Ve výchozím nastavení, je název cesty souboru XML _% windir %\\webové\\PowershellWebAccess\\data\\AuthorizationRules.xml_.</span><span class="sxs-lookup"><span data-stu-id="7607c-255">By default, the path name of the XML file is _%windir%\\Web\\PowershellWebAccess\\data\\AuthorizationRules.xml_.</span></span>

<span data-ttu-id="7607c-256">Cesta k souboru XML pravidla autorizace je uložena v **powwa.config** soubor, který se nachází v _% windir %\\webové\\PowershellWebAccess\\data_.</span><span class="sxs-lookup"><span data-stu-id="7607c-256">The path to the authorization rules XML file is stored in the **powwa.config** file, which is found in _%windir%\\Web\\PowershellWebAccess\\data_.</span></span> <span data-ttu-id="7607c-257">Správce má flexibilně změnit odkaz na výchozí cestu v **powwa.config** tak, aby vyhovovala potřebám nebo požadavkům.</span><span class="sxs-lookup"><span data-stu-id="7607c-257">The administrator has the flexibility to change the reference to the default path in **powwa.config** to suit preferences or requirements.</span></span> <span data-ttu-id="7607c-258">Tím, že správce a změňte umístění souboru umožňuje více bran Windows PowerShell Web Access používat stejná autorizační pravidla, pokud taková konfigurace se požaduje.</span><span class="sxs-lookup"><span data-stu-id="7607c-258">Allowing the administrator to change the location of the file lets multiple Windows PowerShell Web Access gateways use the same authorization rules, if such a configuration is desired.</span></span>

## <a name="session-management"></a><span data-ttu-id="7607c-259">Správa relací</span><span class="sxs-lookup"><span data-stu-id="7607c-259">Session management</span></span>

<span data-ttu-id="7607c-260">Ve výchozím nastavení Windows PowerShell Web Access omezuje uživatele relací na tři najednou.</span><span class="sxs-lookup"><span data-stu-id="7607c-260">By default, Windows PowerShell Web Access limits a user to three sessions at one time.</span></span> <span data-ttu-id="7607c-261">Můžete upravit webové aplikace **web.config** soubor ve Správci služby IIS pro podporu jiný počet relací na uživatele.</span><span class="sxs-lookup"><span data-stu-id="7607c-261">You can edit the web application's **web.config** file in IIS Manager to support a different number of sessions per user.</span></span>
<span data-ttu-id="7607c-262">Cesta k **web.config** soubor _$Env: Windir\\webové\\PowerShellWebAccess\\wwwroot\\Web.config_.</span><span class="sxs-lookup"><span data-stu-id="7607c-262">The path to the **web.config** file is _$Env:Windir\\Web\\PowerShellWebAccess\\wwwroot\\Web.config_.</span></span>

<span data-ttu-id="7607c-263">Ve výchozím nastavení je webový Server IIS nakonfigurovaná k restartování fondu aplikací, pokud jsou všechna nastavení upravit.</span><span class="sxs-lookup"><span data-stu-id="7607c-263">By default, IIS Web Server is configured to restart the application pool if any settings are edited.</span></span> <span data-ttu-id="7607c-264">Například když se změní na restartování fondu aplikací **web.config** souboru.</span><span class="sxs-lookup"><span data-stu-id="7607c-264">For example, the application pool is restarted if changes are made to the **web.config** file.</span></span>
><span data-ttu-id="7607c-265">Protože **Windows PowerShell Web Access** stavy relací v paměti používá, uživatelů přihlášených k **Windows PowerShell Web Access** relací ke ztrátě jejich relací při restartování fondu aplikací.</span><span class="sxs-lookup"><span data-stu-id="7607c-265">Because **Windows PowerShell Web Access** uses in-memory session states, users signed in to **Windows PowerShell Web Access** sessions lose their sessions when the application pool is restarted.</span></span>

### <a name="setting-default-parameters-on-the-sign-in-page"></a><span data-ttu-id="7607c-266">Nastavení výchozích parametrů na přihlašovací stránce</span><span class="sxs-lookup"><span data-stu-id="7607c-266">Setting default parameters on the sign-in page</span></span>

<span data-ttu-id="7607c-267">Pokud vaše brána Windows PowerShell Web Access běží na Windows Server 2012 R2, můžete nakonfigurovat výchozí hodnoty pro nastavení, která se zobrazí na přihlašovací stránce Windows PowerShell Web Access.</span><span class="sxs-lookup"><span data-stu-id="7607c-267">If your Windows PowerShell Web Access gateway is running on Windows Server 2012 R2, you can configure default values for the settings that are displayed on the Windows PowerShell Web Access sign-in page.</span></span> <span data-ttu-id="7607c-268">Hodnoty v můžete nakonfigurovat **web.config** soubor, který je popsaný v předchozím odstavci.</span><span class="sxs-lookup"><span data-stu-id="7607c-268">You can configure values in the **web.config** file that is described in the preceding paragraph.</span></span> <span data-ttu-id="7607c-269">Výchozí hodnoty pro nastavení přihlašovací stránky se nacházejí v **appSettings** části souboru web.config; tady je příklad **appSettings** části.</span><span class="sxs-lookup"><span data-stu-id="7607c-269">Default values for the sign-in page settings are found in the **appSettings** section of the web.config file; the following is an example of the **appSettings** section.</span></span> <span data-ttu-id="7607c-270">Platné hodnoty pro mnohá z těchto nastavení jsou stejné jako u odpovídajících parametrů [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) rutiny v prostředí Windows PowerShell.</span><span class="sxs-lookup"><span data-stu-id="7607c-270">Valid values for many of these settings are the same as those for the corresponding parameters of the [New-PSSession](https://technet.microsoft.com/library/hh849717.aspx) cmdlet in Windows PowerShell.</span></span>
<span data-ttu-id="7607c-271">Například `defaultApplicationName` klíč, jak je znázorněno v následující blok kódu, je hodnota **$PSSessionApplicationName** preferenční proměnné v cílovém počítači.</span><span class="sxs-lookup"><span data-stu-id="7607c-271">For example, the `defaultApplicationName` key, as shown in the following code block, is the value of the **$PSSessionApplicationName** preference variable on the target computer.</span></span>

```xml
    <appSettings>
            <add key="maxSessionsAllowedPerUser" value="3"/>
            <add key="defaultPortNumber" value="5985"/>
            <add key="defaultSSLPortNumber" value="5986"/>
            <add key="defaultApplicationName" value="WSMAN"/>
            <add key="defaultUseSslSelection" value="0"/>
            <add key="defaultAuthenticationType" value="0"/>
            <add key="defaultAllowRedirection" value="0"/>
            <add key="defaultConfigurationName" value="Microsoft.PowerShell"/>
    </appSettings>
```

### <a name="time-outs-and-unplanned-disconnections"></a><span data-ttu-id="7607c-272">Vypršení časových limitů a neplánovaná odpojení</span><span class="sxs-lookup"><span data-stu-id="7607c-272">Time-outs and unplanned disconnections</span></span>

<span data-ttu-id="7607c-273">Časový limit relace Windows PowerShell Web Access. V systému Windows PowerShell Web Access spuštěné v systému Windows Server 2012 se zobrazí zpráva Časový limit pro přihlášeného uživatele po 15 minutách nečinnosti relace.</span><span class="sxs-lookup"><span data-stu-id="7607c-273">Windows PowerShell Web Access sessions time out. In Windows PowerShell Web Access running on Windows Server 2012, A time-out message is displayed to signed-in users after 15 minutes of session inactivity.</span></span> <span data-ttu-id="7607c-274">Pokud uživatel neodpoví během pěti minut po zobrazení zprávy o vypršení časového limitu, relace se ukončí a uživatel se odhlásí. Časové limity relací můžete změnit v nastaveních webu ve Správci služby IIS.</span><span class="sxs-lookup"><span data-stu-id="7607c-274">If the user does not respond within five minutes after the time-out message is displayed, the session is ended, and the user is signed out. You can change time-out periods for sessions in the website settings in IIS Manager.</span></span>

<span data-ttu-id="7607c-275">V systému Windows PowerShell Web Access systémem Windows Server 2012 R2, vypršení časového limitu relace, ve výchozím nastavení, po 20 minutách nečinnosti.</span><span class="sxs-lookup"><span data-stu-id="7607c-275">In Windows PowerShell Web Access running on Windows Server 2012 R2, sessions time out, by default, after 20 minutes of inactivity.</span></span> <span data-ttu-id="7607c-276">Pokud uživatelé odpojení z relací ve webové konzole z důvodu chyby sítě nebo jiných neplánovaných výpadků nebo chyb a ne kvůli tomu, že relaci sami zavřeli, Windows PowerShell Web Access relací nadále spouštět, připojení k cílové počítače, dokud nevyprší časový limit na straně klienta.</span><span class="sxs-lookup"><span data-stu-id="7607c-276">If users are disconnected from sessions in the web-based console because of network errors or other unplanned shutdowns or failures, and not because they have closed the sessions themselves, the Windows PowerShell Web Access sessions continue to run, connected to target computers, until the time-out period on the client side lapses.</span></span> <span data-ttu-id="7607c-277">Relace se odpojí buď po uplynutí výchozích 20 minut, nebo po vypršení časového limitu určeného správcem brány, podle toho, co je kratší.</span><span class="sxs-lookup"><span data-stu-id="7607c-277">The session is disconnected after either the default 20 minutes, or after the time-out period specified by the gateway administrator, whichever is shorter.</span></span>

<span data-ttu-id="7607c-278">Pokud server brány se systémem Windows Server 2012 R2, Windows PowerShell Web Access umožňuje uživatelům znovu připojit k uloženým relacím později, ale když chyby sítě, neplánované výpadky nebo jiné chyby odpojit relace, uživatelé nemohou zobrazit ani znovu připojit k uložit relace, dokud nebude po vypršení časového limitu určeného bránou správce uplynula.</span><span class="sxs-lookup"><span data-stu-id="7607c-278">If the gateway server is running Windows Server 2012 R2, Windows PowerShell Web Access lets users reconnect to saved sessions at a later time, but when network errors, unplanned shutdowns, or other failures disconnect sessions, users cannot see or reconnect to saved sessions until after the time-out period specified by the gateway administrator has lapsed.</span></span>

## <a name="see-also"></a><span data-ttu-id="7607c-279">Viz také</span><span class="sxs-lookup"><span data-stu-id="7607c-279">See Also</span></span>

- <span data-ttu-id="7607c-280">[Nainstalovat a používat Windows PowerShell Web Accessu](https://technet.microsoft.com/en-us/library/hh831611(v=ws.11).aspx)</span><span class="sxs-lookup"><span data-stu-id="7607c-280">[Install and Use Windows PowerShell Web Access](https://technet.microsoft.com/en-us/library/hh831611(v=ws.11).aspx)</span></span>
- [<span data-ttu-id="7607c-281">about_Session_Configurations</span><span class="sxs-lookup"><span data-stu-id="7607c-281">about_Session_Configurations</span></span>](https://technet.microsoft.com/library/dd819508.aspx)
- [<span data-ttu-id="7607c-282">Rutiny prostředí Windows PowerShell Web Access</span><span class="sxs-lookup"><span data-stu-id="7607c-282">Windows PowerShell Web Access Cmdlets</span></span>](cmdlets/web-access-cmdlets.md)
